<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Editar turista</title>
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <div class="layout">
    <aside class="sidebar">
      <%- include('../partials/sidebar', { user: user, active: 'turistas' }) %>
    </aside>
    <section class="main">
      <%- include('../partials/topbar', { user: user }) %>
      <div class="content">
        <div class="panel" style="max-width:720px">
          <h1>Editar turista</h1>
          <form class="form" method="post" action="/turistas/<%= item.COD_TURISTA %>">
            <label>Código (no editable)</label>
            <input class="input" value="<%= item.COD_TURISTA %>" disabled />
            <label>Nombre 1</label>
            <input class="input" name="nombre1" value="<%= item.NOMBRE1 %>" required />
            <label>Nombre 2</label>
            <input class="input" name="nombre2" value="<%= item.NOMBRE2 || '' %>" />
            <label>Nombre 3</label>
            <input class="input" name="nombre3" value="<%= item.NOMBRE3 || '' %>" />
            <label>Apellido 1</label>
            <input class="input" name="apellido1" value="<%= item.APELLIDO1 %>" required />
            <label>Apellido 2</label>
            <input class="input" name="apellido2" value="<%= item.APELLIDO2 || '' %>" />
            <label>Dirección</label>
            <input class="input" name="direccion" value="<%= item.DIRECCION || '' %>" />
            <label>País residencia</label>
            <input class="input" name="pais" value="<%= item.PAIS_RESIDENCIA || '' %>" />
            <div style="display:flex;gap:10px;justify-content:flex-end;margin-top:8px">
              <a class="btn" href="/turistas" style="border-color:#334155;color:#e5e7eb">Cancelar</a>
              <button class="btn btn-success" type="submit">Actualizar</button>
            </div>
          </form>

          <div class="panel" style="margin-top:16px">
            <h3>Emails</h3>
            <ul>
              <% for (const e of emails) { %>
                <li>
                  <%= e.EMAIL %>
                  <form method="post" action="/turistas/<%= item.COD_TURISTA %>/emails/<%= encodeURIComponent(e.EMAIL) %>/delete" style="display:inline" onsubmit="return confirm('¿Eliminar email <%= e.EMAIL %>?');">
                    <button class="btn btn-danger" type="submit">Eliminar</button>
                  </form>
                </li>
              <% } %>
            </ul>
            <form method="post" action="/turistas/<%= item.COD_TURISTA %>/emails" style="display:flex;gap:8px;align-items:center;margin-top:8px">
              <input class="input" name="email" placeholder="nuevo@correo.com" />
              <button class="btn btn-success" type="submit">Agregar email</button>
            </form>
          </div>

          <div class="panel" style="margin-top:16px">
            <h3>Teléfonos</h3>
            <ul>
              <% for (const t of tels) { %>
                <li>
                  <%= t.TELEFONO %>
                  <form method="post" action="/turistas/<%= item.COD_TURISTA %>/telefonos/<%= encodeURIComponent(t.TELEFONO) %>/delete" style="display:inline" onsubmit="return confirm('¿Eliminar teléfono <%= t.TELEFONO %>?');">
                    <button class="btn btn-danger" type="submit">Eliminar</button>
                  </form>
                </li>
              <% } %>
            </ul>
            <form method="post" action="/turistas/<%= item.COD_TURISTA %>/telefonos" style="display:flex;gap:8px;align-items:center;margin-top:8px">
              <input class="input" name="telefono" placeholder="555-1234" />
              <button class="btn btn-success" type="submit">Agregar teléfono</button>
            </form>
          </div>
        </div>
      </div>
    </section>
  </div>
</body>
</html>
