<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Editar turista</title>
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <header class="container">
    <h1>Editar turista</h1>
    <nav class="nav">
      <a href="/">Inicio</a>
      <% if (user) { %>
        <a href="/turistas">Volver</a>
        <span style="flex:1"></span>
        <span>Hola, <strong><%= user.username %></strong></span>
        <a href="/logout">Salir</a>
      <% } else { %>
        <a href="/login">Login</a>
        <a href="/register">Registro</a>
      <% } %>
    </nav>
  </header>
  <main class="container">
    <form class="card form" method="post" action="/turistas/<%= item.COD_TURISTA %>">
      <label>Código (no editable)</label>
      <input value="<%= item.COD_TURISTA %>" disabled />
      <label>Nombre 1</label>
      <input name="nombre1" value="<%= item.NOMBRE1 %>" required />
      <label>Nombre 2</label>
      <input name="nombre2" value="<%= item.NOMBRE2 || '' %>" />
      <label>Nombre 3</label>
      <input name="nombre3" value="<%= item.NOMBRE3 || '' %>" />
      <label>Apellido 1</label>
      <input name="apellido1" value="<%= item.APELLIDO1 %>" required />
      <label>Apellido 2</label>
      <input name="apellido2" value="<%= item.APELLIDO2 || '' %>" />
      <label>Dirección</label>
      <input name="direccion" value="<%= item.DIRECCION || '' %>" />
      <label>País residencia</label>
      <input name="pais" value="<%= item.PAIS_RESIDENCIA || '' %>" />
      <button type="submit">Actualizar</button>
    </form>

    <div class="card" style="margin-top:16px">
      <h3>Emails</h3>
      <ul>
        <% for (const e of emails) { %>
          <li>
            <%= e.EMAIL %>
            <form method="post" action="/turistas/<%= item.COD_TURISTA %>/emails/<%= encodeURIComponent(e.EMAIL) %>/delete" style="display:inline" onsubmit="return confirm('¿Eliminar email <%= e.EMAIL %>?');">
              <button type="submit">Eliminar</button>
            </form>
          </li>
        <% } %>
      </ul>
      <form method="post" action="/turistas/<%= item.COD_TURISTA %>/emails">
        <input name="email" placeholder="nuevo@correo.com" />
        <button type="submit">Agregar email</button>
      </form>
    </div>

    <div class="card" style="margin-top:16px">
      <h3>Teléfonos</h3>
      <ul>
        <% for (const t of tels) { %>
          <li>
            <%= t.TELEFONO %>
            <form method="post" action="/turistas/<%= item.COD_TURISTA %>/telefonos/<%= encodeURIComponent(t.TELEFONO) %>/delete" style="display:inline" onsubmit="return confirm('¿Eliminar teléfono <%= t.TELEFONO %>?');">
              <button type="submit">Eliminar</button>
            </form>
          </li>
        <% } %>
      </ul>
      <form method="post" action="/turistas/<%= item.COD_TURISTA %>/telefonos">
        <input name="telefono" placeholder="555-1234" />
        <button type="submit">Agregar teléfono</button>
      </form>
    </div>
  </main>
</body>
</html>
